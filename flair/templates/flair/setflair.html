{% extends "account/base.html" %}
{% load static %}

{% block title %}{{ block.super }} - Set flair{% endblock %}

{% block content %}

<link rel="stylesheet" type="text/css" href="{% static '/styles/setflair.css' %}">

<form action="/submit" method="post">
    {% csrf_token %}
    <div class="container custom-container">
        <div class="row">
            <div class="col-md">
                <div class="section-title-grey">Please select your <span class="section-title-emphasis">Anime Tracking</span> flair:</div>

                <input type="radio" id="notracker" name="defaultflair" value="notracker">
                <label for="notracker">No Tracker</label><br>
            
                {% for flairtype in default_flairs %}
                    {% if flairtype.flair_type == "default" %}
                        <input type="radio" id="{{flairtype.display_name}}" name="defaultflair" value="{{flairtype.display_name}}">
                        <label for="{{flairtype.display_name}}">{{flairtype.display_name}}</label>
                        <img src="{{flairtype.static_image}}">
                        <br>
                    {% endif %}
                {% endfor %}
            </div>

            <div class="col-md">
                {%if allowed_flairs %}
                <!-- only display award flairs if they have any  -->
                <div class="section-title-grey">Select any number of additional <span class="section-title-emphasis">Awarded</span> flairs:</div>
        
                {% for flair_awarded in allowed_flairs %}
                    <img src="{{flair_awarded.flair_id.static_image}}">
        
                    <!-- checked="checked"-->
        <!--            if flairetype.flair... = something known-->
        
                    {%if flair_awarded.flair_id.checked == True %}
                        <input type="checkbox"
                               id="flairChoice{{flair_awarded.flair_id.id}}"
                               name="flairtype_{{flair_awarded.flair_id.display_name}}"
                               value="{{flair_awarded.flair_id.display_name}}"
                               checked="checked"
                        >
                    {% else %}
                        <input type="checkbox"
                               id="flairChoice{{flair_awarded.flair_id.id}}"
                               name="flairtype_{{flair_awarded.flair_id.display_name}}"
                               value="{{flair_awarded.flair_id.display_name}}"
                        >
                    {% endif %}
                    <label for="flairChoice{{flair_awarded.flair_id.id}}">{{flair_awarded.flair_id}} </label><br>
                {% endfor %}
            {% endif %}
            </div>
        </div>

        <div class="row">
            <div class="col-md">
                    <div id="account-inner-container">
                        <div id="label-disclaimer-container">
                            <small class="form-text text-muted">* Not the full URL</small>
                            <label class="section-title-grey" for="trackerAccountName">Anime Tracker <span class="section-title-emphasis">Account Name</span>:</label>
                        </div>
                        <input class="form-control" type="text" id="trackerAccountName" name="trackerAccountName" value="" placeholder="e.g: https://myanimelist.net/animelist/[ThisUsername]" maxlength="20">
                        <div id="input-container">
                            <input class="blue-input" type="submit" value="Reset Flair" name="flair_reset_request">
                            <input class="blue-input" type="submit" value="Submit" name="flair_change_request">
                        </div> 
                </div>
            </div>
            <div class="col-md">
                {% if current_emoji_flair_list|length >= 1 or current_flair_text|length > 0 %}
                <div class="section-title-grey">Flair Preview:</div>
                    <div id="{{tracker_name}}box" style="color:white">
                        {% for flair_image in current_emoji_flair_list %}
                            <img class="d-inline-block align-top" src="{{flair_image.static_image}}">
                        {% endfor %}
                        <a href="{{current_flair_text}}" target="_blank" style="color:white">{{current_flair_text}}</a>
                    </div>
                {% else %}
                    <!--User has not set a flair yet. -->
                {% endif %}
            </div>
        </div>

    </div>
</form>



{% endblock %}